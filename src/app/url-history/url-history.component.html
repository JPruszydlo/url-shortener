<div
  *ngFor="let item of urlHistory"
  style="box-shadow: 0 0 10px lightgray"
  class="bg-teal-200 border-teal-300 border-2 overflow-hidden m-auto mt-5 w-3/4 max-w-lg"
>
  <div
    id="short-url-box"
    style="padding-left: 2%; padding-right: 2%"
    class="h-10 p-1 float-left text-lg font-extrabold text-blue-900 underline"
  >
    <a #ShortUrl [href]="item.short" target="_blank">{{ item.short }}</a>
  </div>
  <div id="actions-box" class="text-right pr-1 float-right">
    <button (click)="qrCodeUrl = item.short">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-5 inline-block mr-1">
        <path
          fill-rule="evenodd"
          d="M3 4.875C3 3.839 3.84 3 4.875 3h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 0 1 3 9.375v-4.5ZM4.875 4.5a.375.375 0 0 0-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 0 0 .375-.375v-4.5a.375.375 0 0 0-.375-.375h-4.5Zm7.875.375c0-1.036.84-1.875 1.875-1.875h4.5C20.16 3 21 3.84 21 4.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5a1.875 1.875 0 0 1-1.875-1.875v-4.5Zm1.875-.375a.375.375 0 0 0-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 0 0 .375-.375v-4.5a.375.375 0 0 0-.375-.375h-4.5ZM6 6.75A.75.75 0 0 1 6.75 6h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75A.75.75 0 0 1 6 7.5v-.75Zm9.75 0A.75.75 0 0 1 16.5 6h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75ZM3 14.625c0-1.036.84-1.875 1.875-1.875h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.035-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 0 1 3 19.125v-4.5Zm1.875-.375a.375.375 0 0 0-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 0 0 .375-.375v-4.5a.375.375 0 0 0-.375-.375h-4.5Zm7.875-.75a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm6 0a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75ZM6 16.5a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm9.75 0a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm-3 3a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm6 0a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Z"
          clip-rule="evenodd"
        />
      </svg>
    </button>

    <button
      (click)="copyToClipboard(ShortUrl.href)"
      class="text-white bg-blue-500 rounded-lg hover:bg-blue-600"
      style="padding: 1px 5px 1px 3px; margin: 4px 2px 4px 1px"
    >
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-5 inline-block">
        <path
          d="M7.5 3.375c0-1.036.84-1.875 1.875-1.875h.375a3.75 3.75 0 0 1 3.75 3.75v1.875C13.5 8.161 14.34 9 15.375 9h1.875A3.75 3.75 0 0 1 21 12.75v3.375C21 17.16 20.16 18 19.125 18h-9.75A1.875 1.875 0 0 1 7.5 16.125V3.375Z"
        />
        <path
          d="M15 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 17.25 7.5h-1.875A.375.375 0 0 1 15 7.125V5.25ZM4.875 6H6v10.125A3.375 3.375 0 0 0 9.375 19.5H16.5v1.125c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625V7.875C3 6.839 3.84 6 4.875 6Z"
        />
      </svg>
      Copy
    </button>
  </div>
  <div class="float-left p-1 text-sm w-full text-nowrap" style="padding-left: 2%; padding-right: 2%">
    {{ getLongUrl(item.long) }}
  </div>
</div>

<div
  *ngIf="qrCodeUrl != ''"
  style="box-shadow: 0 0 15px black; padding: 0 0 40px 0"
  class="absolute bg-white top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50"
>
  <p class="text-center mt-2">{{ qrCodeUrl }}</p>
  <qr-code [value]="qrCodeUrl" #QrCode size="250" errorCorrectionLevel="M" />
  <p class="text-center">
    <button (click)="saveAsImage(QrCode)" class="bg-blue-500 text-white pt-1 pb-1 pl-14 pr-14 rounded-md">
      Download
    </button>
  </p>
  <p class="text-center">
    <button (click)="qrCodeUrl = ''" class="bg-red-500 text-white pt-1 pb-1 pl-5 pr-5 rounded-md mt-2">Close</button>
  </p>
</div>
